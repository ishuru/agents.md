name: Upstream sync PR

on:
  schedule:
    - cron: "0 12 * * 1"  # Mondays at 12:00 UTC
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  sync-pr:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
        with:
          fetch-depth: 0

      - name: Fetch upstream
        run: |
          git remote add upstream https://github.com/agentsmd/agents.md.git
          git fetch upstream main

      - name: Create sync branch
        run: |
          git checkout -B chore/upstream-sync upstream/main

      - name: Create PR
        uses: peter-evans/create-pull-request@v8
        with:
          base: main
          branch: chore/upstream-sync
          title: "chore: sync from agentsmd/agents.md"
          commit-message: "chore: sync from upstream"
          body: |
            Sync fork with upstream agentsmd/agents.md (main).
            
            This is an automated sync via GitHub Actions to keep the fork up-to-date.
